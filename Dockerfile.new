FROM python:3.9-slim

# 設定工作目錄
WORKDIR /app

# 安裝所有必要的依賴項
RUN pip install --no-cache-dir \
    discord.py \
    python-dotenv \
    flask \
    line-bot-sdk \
    click \
    werkzeug \
    jinja2 \
    itsdangerous \
    markupsafe \
    aiohttp

# 複製應用程式代碼
COPY main.py ./
COPY .env.example ./.env.example

# 建立臨時圖片資料夾
RUN mkdir -p temp_images

# 設定環境變數
ENV PYTHONUNBUFFERED=1

# 運行應用程式
CMD ["python", "main.py"]
